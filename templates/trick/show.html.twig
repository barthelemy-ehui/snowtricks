{% extends 'base.html.twig' %}

{% block title %}{{ trick.name }}{% endblock %}

{% block body %}
    <div>
        <!-- Todo: Ã  afficher seulement si on est connecter -->
        <a href="{{ path('trick_edit',{'slug': trick.slug}) }}">Editer</a>
    </div>
        <div>
            <strong>{{ trick.name }}</strong>
        </div>
    {% if trick.resource %}
        <div>
            <!-- todo afficher selon si c'est video ou image-->
            <img src="{{ files_directory ~ trick.resource }}" alt="">
        </div>
    {% endif %}

    <div>
        <p>
            {{ trick.description }}
        </p>
    </div>
    <div>
        <em>{{ trick.user.username }}</em> | <em>{{ trick.category.name }}</em>
    </div>

    <br/>
    <div>
        <strong>
            Discussions:
        </strong>
    </div>
    <br/>
    <div>
        {% for comment in trick.comments %}
        <div>
            <div>
                {{ comment.content }}
            </div>
            <div>
                <strong>Auteur:</strong><em>{{ comment.user.username }}</em>
                <strong>Date:</strong><em>{{ comment.createdat|date('d-m-Y') }}</em>
            </div>
        </div>
        <br/>
        {% endfor %}

        <div>
        {{ form_start(form, {'action': '/trick/show/' ~ trick.slug, 'attr': {'novalidate': 'novalidate'} }) }}
            <div>
                {{ form_label(form.content) }}
                {{ form_widget(form.content) }}
                {{ form_errors(form.content) }}
                {{ form_widget(form.trick) }}
            </div>
            <div>
                {{ form_widget(form.save) }}
            </div>
            <div>
                {{ form_widget(form.save) }}
            </div>
        {{ form_end(form) }}
        </div>
    </div>
{% endblock %}